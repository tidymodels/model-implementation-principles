<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Conventions for R Modeling Packages</title>
  <meta name="description" content="Conventions for R Modeling Packages" />
  <meta name="generator" content="bookdown 0.11.1 and GitBook 2.6.7" />

  <meta property="og:title" content="Conventions for R Modeling Packages" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Conventions for R Modeling Packages" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="general-conventions.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="general-conventions.html"><a href="general-conventions.html"><i class="fa fa-check"></i><b>2</b> General Conventions</a></li>
<li class="chapter" data-level="3" data-path="function-interfaces.html"><a href="function-interfaces.html"><i class="fa fa-check"></i><b>3</b> Function Interfaces</a><ul>
<li class="chapter" data-level="3.1" data-path="function-interfaces.html"><a href="function-interfaces.html#user-facing-functions"><i class="fa fa-check"></i><b>3.1</b> User-Facing Functions</a></li>
<li class="chapter" data-level="3.2" data-path="function-interfaces.html"><a href="function-interfaces.html#computational-functions"><i class="fa fa-check"></i><b>3.2</b> Computational Functions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="the-model-object.html"><a href="the-model-object.html"><i class="fa fa-check"></i><b>4</b> The Model Object</a></li>
<li class="chapter" data-level="5" data-path="print-and-summary-methods.html"><a href="print-and-summary-methods.html"><i class="fa fa-check"></i><b>5</b> Print and Summary Methods</a></li>
<li class="chapter" data-level="6" data-path="model-predictions.html"><a href="model-predictions.html"><i class="fa fa-check"></i><b>6</b> Model Predictions</a><ul>
<li class="chapter" data-level="6.1" data-path="model-predictions.html"><a href="model-predictions.html#input-data"><i class="fa fa-check"></i><b>6.1</b> Input Data</a></li>
<li class="chapter" data-level="6.2" data-path="model-predictions.html"><a href="model-predictions.html#return-values"><i class="fa fa-check"></i><b>6.2</b> Return Values</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="standardized-argument-names.html"><a href="standardized-argument-names.html"><i class="fa fa-check"></i><b>7</b> Standardized Argument Names</a><ul>
<li class="chapter" data-level="7.1" data-path="standardized-argument-names.html"><a href="standardized-argument-names.html#dot-usage"><i class="fa fa-check"></i><b>7.1</b> Dot Usage</a></li>
<li class="chapter" data-level="7.2" data-path="standardized-argument-names.html"><a href="standardized-argument-names.html#data-arguments"><i class="fa fa-check"></i><b>7.2</b> Data Arguments</a></li>
<li class="chapter" data-level="7.3" data-path="standardized-argument-names.html"><a href="standardized-argument-names.html#numerical-arguments"><i class="fa fa-check"></i><b>7.3</b> Numerical Arguments</a></li>
<li class="chapter" data-level="7.4" data-path="standardized-argument-names.html"><a href="standardized-argument-names.html#statistical-quantities"><i class="fa fa-check"></i><b>7.4</b> Statistical Quantities</a></li>
<li class="chapter" data-level="7.5" data-path="standardized-argument-names.html"><a href="standardized-argument-names.html#tuning-parameters"><i class="fa fa-check"></i><b>7.5</b> Tuning Parameters</a></li>
<li class="chapter" data-level="7.6" data-path="standardized-argument-names.html"><a href="standardized-argument-names.html#others"><i class="fa fa-check"></i><b>7.6</b> Others</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="parallel-processing.html"><a href="parallel-processing.html"><i class="fa fa-check"></i><b>8</b> Parallel Processing</a></li>
<li class="chapter" data-level="9" data-path="notes.html"><a href="notes.html"><i class="fa fa-check"></i><b>9</b> Notes</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Conventions for R Modeling Packages</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Conventions for R Modeling Packages</h1>
<p class="date"><em>draft version compiled on 2019-07-03</em></p>
</div>
<div id="introduction" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Introduction</h1>
<p>The S language has had unofficial conventions for modeling function, such as:</p>
<ul>
<li><p>using formulas to specify model terms, variable roles, and some statistical calculations</p></li>
<li><p>basic infrastructure for creating design matrices (<code>model.matrix</code>), computing statistical probabilities (<code>logLik</code>), and commom analyses (<code>anova</code>, <code>p.adjust</code>, etc.)</p></li>
<li><p>existing OOP classes like <code>predict</code>, <code>update</code>, etc.</p></li>
</ul>
<p>Despite a <a href="https://developer.r-project.org/model-fitting-functions.html">note</a> written by an R core member in 2003, these conventions have never been formally required for packages and this has led to a significant amount of between- and within-package heterogeneity. For example, the table below shows myriad methods for obtaining class probability estimates for a set of modeling functions:</p>
<table>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="left">Package</th>
<th align="left">Code</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>lda</code></td>
<td align="left"><code>MASS</code></td>
<td align="left"><code>predict(obj)</code></td>
</tr>
<tr class="even">
<td align="left"><code>glm</code></td>
<td align="left"><code>stats</code></td>
<td align="left"><code>predict(obj, type = &quot;response&quot;)</code></td>
</tr>
<tr class="odd">
<td align="left"><code>gbm</code></td>
<td align="left"><code>gbm</code></td>
<td align="left"><code>predict(obj, type = &quot;response&quot;, n.trees)</code></td>
</tr>
<tr class="even">
<td align="left"><code>mda</code></td>
<td align="left"><code>mda</code></td>
<td align="left"><code>predict(obj, type = &quot;posterior&quot;)</code></td>
</tr>
<tr class="odd">
<td align="left"><code>rpart</code></td>
<td align="left"><code>rpart</code></td>
<td align="left"><code>predict(obj, type = &quot;prob&quot;)</code></td>
</tr>
<tr class="even">
<td align="left"><code>Weka</code></td>
<td align="left"><code>RWeka</code></td>
<td align="left"><code>predict(obj, type = &quot;probability&quot;)</code></td>
</tr>
<tr class="odd">
<td align="left"><code>logitboost</code></td>
<td align="left"><code>LogitBoost</code></td>
<td align="left"><code>predict(obj, type = &quot;raw&quot;, nIter)</code></td>
</tr>
<tr class="even">
<td align="left"><code>pamr.train</code></td>
<td align="left"><code>pamr</code></td>
<td align="left"><code>pamr.predict(obj, type = &quot;posterior&quot;)</code></td>
</tr>
</tbody>
</table>
<p>Note that many use different values of <code>type</code> to obtain the same output and one does not use the standard S3 <code>predict</code> method for the function. Also notice that two models require an extra parameter to make predictions and despite these parameters signifying the same idea (the ensemble size), different parameter names are used. There are myriad examples of inconsistencies in function design, return values, and other aspects of modeling functions.</p>
<p>The goal of this document is to define a specification for creating functions and packages for <em>new modeling packages</em>. These are opinionated specifications but are meant to reflect reasonable positions for standards based on prior experience. A number of these guidelines are specific to the tidyverse (e.g. “Function names should use snake_case instead of camelCase.”). However, the majority are driven by common sense and good design principles (e.g. “All functions must be reproducible from run-to-run.”).</p>
<p>The chapters in this document contain recommendations for different aspects of modeling functions. The items within are meant to be succinct and concise. In many cases, further details can be found in links to the Notes chapter. Examples and implementation details can be found there.</p>
<p>Once these guidelines have been finalized, a set of GitHub repositories will be created to serve as templates that new package builders can use.</p>

</div>
            </section>

          </div>
        </div>
      </div>

<a href="general-conventions.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/tidymodels/model-implementation-principles/edit/master/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
